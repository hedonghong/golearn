## go build

|标记名称|标记描述|
| ----------- | ----------- |
|-a	|强行对所有涉及到的代码包（包含标准库中的代码包）进行重新构建，即使它们已经是最新的了。|
|-n|打印编译期间所用到的其它命令，但是并不真正执行它们。|
|-p n|指定编译过程中执行各任务的并行数量（确切地说应该是并发数量）。在默认情况下，该数量等于CPU的逻辑核数。但是在darwin/arm平台（即iPhone和iPad所用的平台）下，该数量默认是1。|
|-race|	开启竞态条件的检测。不过此标记目前仅在linux/amd64、freebsd/amd64、darwin/amd64和windows/amd64平台下受到支持。
|-v|打印出那些被编译的代码包的名字。|
|-work|打印出编译时生成的临时工作目录的路径，并在编译结束时保留它。在默认情况下，编译结束时会删除该目录。|
|-x|	打印编译期间所用到的其它命令。注意它与-n标记的区别。|

在本节的最后，我们对一些并不太常用的标记进行简要的说明：

-asmflags
此标记可以后跟另外一些标记，如-D、-I、-S等。这些后跟的标记用于控制Go语言编译器编译汇编语言文件时的行为。

-buildmode
此标记用于指定编译模式，使用方式如-buildmode=default（这等同于默认情况下的设置）。此标记支持的编译模式目前有6种。借此，我们可以控制编译器在编译完成后生成静态链接库（即.a文件，也就是我们之前说的归档文件）、动态链接库（即.so文件）或/和可执行文件（在Windows下是.exe文件）。

-compiler
此标记用于指定当前使用的编译器的名称。其值可以为gc或gccgo。其中，gc编译器即为Go语言自带的编辑器，而gccgo编译器则为GCC提供的Go语言编译器。而GCC则是GNU项目出品的编译器套件。GNU是一个众所周知的自由软件项目。在开源软件界不应该有人不知道它。好吧，如果你确实不知道它，赶紧去google吧。

-gccgoflags
此标记用于指定需要传递给gccgo编译器或链接器的标记的列表。

-gcflags
此标记用于指定需要传递给go tool compile命令的标记的列表。

-installsuffix
为了使当前的输出目录与默认的编译输出目录分离，可以使用这个标记。此标记的值会作为结果文件的父目录名称的后缀。其实，如果使用了-race标记，这个标记会被自动追加且其值会为race。如果我们同时使用了-race标记和-installsuffix，那么在-installsuffix标记的值的后面会再被追加_race，并以此来作为实际使用的后缀。

-ldflags
此标记用于指定需要传递给go tool link命令的标记的列表。

-linkshared
此标记用于与-buildmode=shared一同使用。后者会使作为编译目标的非main代码包都被合并到一个动态链接库文件中，而前者则会在此之上进行链接操作。

-pkgdir
使用此标记可以指定一个目录。编译器会只从该目录中加载代码包的归档文件，并会把编译可能会生成的代码包归档文件放置在该目录下。

-tags
此标记用于指定在实际编译期间需要受理的编译标签（也可被称为编译约束）的列表。这些编译标签一般会作为源码文件开始处的注释的一部分，例如，在$GOROOT/src/os/file_posix.go开始处的注释为：

// Copyright 2009 The Go Authors. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
// +build darwin dragonfly freebsd linux nacl netbsd openbsd solaris windows
最后一行注释即包含了与编译标签有关的内容。大家可以查看代码包go/build的文档已获得更多的关于编译标签的信息。

-toolexec
此标记可以让我们去自定义在编译期间使用一些Go语言自带工具（如vet、asm等）的方式。

## go clean
-i
-n
-x
-r
-cache
-testcache

## go run
编译命令源码文件和运行对应的可执行文件
-n
-x

标记名称	标记描述
-cpuprofile	指定CPU概要文件的保存路径。该路径可以是相对路径也可以是绝对路径，但其父路径必须已存在。
-blockprofile	指定程序阻塞概要文件的保存路径。该路径可以是相对路径也可以是绝对路径，但其父路径必须已存在。
-blockprofilerate	定义其值为n。此标记指定每发生n次Goroutine阻塞事件时，进行一次取样操作。
-memprofile	指定内存概要文件的保存路径。该路径可以是相对路径也可以是绝对路径，但其父路径必须已存在。
-memprofilerate	定义其值为n。此标记指定每分配n个字节的堆内存时，进行一次取样操作。
下面我们使用go run命令运行改造后的命令源码文件showpds.go。示例如下：

## go fmt 
-n
-x

## go install
主要用来生成库和工具。一是编译包文件（无main包），将编译后的包文件放到 pkg 目录下（$GOPATH/pkg）。二是编译生成可执行文件（有main包），将可执行文件放到 bin 目录（$GOPATH/bin）

## go get

|标记名称|标记描述|
| ----------- | ----------- |
|-v| 意味着会打印出被构建的代码包的名字
|-d|	让命令程序只执行下载动作，而不执行安装动作。
|-f|	仅在使用-u标记时才有效。该标记会让命令程序忽略掉对已下载代码包的导入路径的检查。如果下载并安装的代码包所属的项目是你从别人那里Fork过来的，那么这样做就尤为重要了。
|-fix|	让命令程序在下载代码包后先执行修正动作，而后再进行编译和安装。
|-insecure|	允许命令程序使用非安全的scheme（如HTTP）去下载指定的代码包。如果你用的代码仓库（如公司内部的Gitlab）没有HTTPS支持，可以添加此标记。请在确定安全的情况下使用它。
|-t|	让命令程序同时下载并安装指定的代码包中的测试源码文件中依赖的代码包。
|-u|	让命令利用网络来更新已有代码包及其依赖包。默认情况下，该命令只会从网络上下载本地不存在的代码包，而不会更新已有的代码包。

## go generate
-x 输出执行的命令
扫描当前包中代码，会执行代码中有//go:generate 注释开头的 后面的go 命令行
//go:generate go run main.go
//go:generate go version

## go doc
命令可以打印附于Go语言程序实体上的文档。我们可以通过把程序实体的标识符作为该命令的参数来达到查看其文档的目的。

|标记名称|标记描述|
| ----------- | ----------- |
|-c|	加入此标记后会使go doc命令区分参数中字母的大小写。默认情况下，命令是大小写不敏感的。
|-cmd|	加入此标记后会使go doc命令同时打印出main包中的可导出的程序实体（其名称的首字母大写）的文档。默认情况下，这部分文档是不会被打印出来的。
|-u|	加入此标记后会使go doc命令同时打印出不可导出的程序实体（其名称的首字母小写）的文档。默认情况下，这部分文档是不会被打印出来的。

## go test
命令用于对Go语言编写的程序进行测试。这种测试是以代码包为单位的。

|标记名称|标记描述|
| ----------- | ----------- |
|-c|	生成用于运行测试的可执行文件，但不执行它。这个可执行文件会被命名为“pkg.test”，其中的“pkg”即为被测试代码包的导入路径的最后一个元素的名称。
|-i|	安装/重新安装运行测试所需的依赖包，但不编译和运行测试代码。
|-o|	指定用于运行测试的可执行文件的名称。追加该标记不会影响测试代码的运行，除非同时追加了标记-c或-i。
|-v -run xxx x_test.go|测试xxx方法
|-bench=.|基准测试，-v -bench=. -benchtime=5s
## go list
命令的作用是列出指定的代码包的信息

## go env

go env用于打印Go语言的环境信息

名称	说明
CGO_ENABLED	指明cgo工具是否可用的标识。
GOARCH	程序构建环境的目标计算架构。
GOBIN	存放可执行文件的目录的绝对路径。
GOCHAR	程序构建环境的目标计算架构的单字符标识。
GOEXE	可执行文件的后缀。
GOHOSTARCH	程序运行环境的目标计算架构。
GOOS	程序构建环境的目标操作系统。
GOHOSTOS	程序运行环境的目标操作系统。
GOPATH	工作区目录的绝对路径。
GORACE	用于数据竞争检测的相关选项。
GOROOT	Go语言的安装目录的绝对路径。
GOTOOLDIR	Go工具目录的绝对路径。

## go tool pprof
性能分析

名称	说明	取样频率
goroutine	活跃Goroutine的信息的记录。	仅在获取时取样一次。
threadcreate	系统线程创建情况的记录。	仅在获取时取样一次。
heap	堆内存分配情况的记录。	默认每分配512K字节时取样一次。
block	Goroutine阻塞事件的记录。	默认每发生一次阻塞事件时取样一次。